webpackJsonp([1],{"4WTo":function(t,e,r){var i=r("NWt+");t.exports=function(t,e){var r=[];return i(t,!1,r.push,r,e),r}},"5zde":function(t,e,r){r("zQR9"),r("qyJz"),t.exports=r("FeBl").Array.from},"7Doy":function(t,e,r){var i=r("EqjI"),a=r("7UMu"),n=r("dSzd")("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&null===(e=e[n])&&(e=void 0)),void 0===e?Array:e}},"9Bbf":function(t,e,r){"use strict";var i=r("kM2E");t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},"9C8M":function(t,e,r){"use strict";var i=r("evD5").f,a=r("Yobk"),n=r("xH/j"),o=r("+ZMJ"),s=r("2KxR"),c=r("NWt+"),l=r("vIB/"),u=r("EGZi"),d=r("bRrM"),f=r("+E39"),v=r("06OY").fastKey,h=r("LIJb"),p=f?"_s":"size",m=function(t,e){var r,i=v(e);if("F"!==i)return t._i[i];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,l){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&c(i,r,t[l],t)});return n(u.prototype,{clear:function(){for(var t=h(this,e),r=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var r=h(this,e),i=m(r,t);if(i){var a=i.n,n=i.p;delete r._i[i.i],i.r=!0,n&&(n.n=a),a&&(a.p=n),r._f==i&&(r._f=a),r._l==i&&(r._l=n),r[p]--}return!!i},forEach:function(t){h(this,e);for(var r,i=o(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!m(h(this,e),t)}}),f&&i(u.prototype,"size",{get:function(){return h(this,e)[p]}}),u},def:function(t,e,r){var i,a,n=m(t,e);return n?n.v=r:(t._l=n={i:a=v(e,!0),k:e,v:r,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[p]++,"F"!==a&&(t._i[a]=n)),t},getEntry:m,setStrong:function(t,e,r){l(t,e,function(t,r){this._t=h(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},r?"entries":"values",!r,!0),d(e)}}},ALrJ:function(t,e,r){var i=r("+ZMJ"),a=r("MU5D"),n=r("sB3e"),o=r("QRG4"),s=r("oeOm");t.exports=function(t,e){var r=1==t,c=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,v=e||s;return function(e,s,h){for(var p,m,g=n(e),b=a(g),_=i(s,h,3),x=o(b.length),k=0,w=r?v(e,x):c?v(e,0):void 0;x>k;k++)if((f||k in b)&&(m=_(p=b[k],k,g),t))if(r)w[k]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return k;case 2:w.push(p)}else if(u)return!1;return d?-1:l||u?u:w}}},BDhv:function(t,e,r){var i=r("kM2E");i(i.P+i.R,"Set",{toJSON:r("m9gC")("Set")})},HpRW:function(t,e,r){"use strict";var i=r("kM2E"),a=r("lOnJ"),n=r("+ZMJ"),o=r("NWt+");t.exports=function(t){i(i.S,t,{from:function(t){var e,r,i,s,c=arguments[1];return a(this),(e=void 0!==c)&&a(c),void 0==t?new this:(r=[],e?(i=0,s=n(c,arguments[2],2),o(t,!1,function(t){r.push(s(t,i++))})):o(t,!1,r.push,r),new this(r))}})}},LIJb:function(t,e,r){var i=r("EqjI");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},RpbZ:function(t,e,r){"use strict";var i=r("woOf"),a=r.n(i),n=r("Xxa5"),o=r.n(n),s=r("exGp"),c=r.n(s),l=r("lHA8"),u=r.n(l),d=r("c/Tr"),f=r.n(d),v=r("Dd8w"),h=r.n(v),p=r("NYxO"),m=(r("4swq"),r("mtWM")),g=r.n(m);e.a={middleware:["authenticated"],components:{},computed:h()({},Object(p.mapGetters)({isAuthenticated:"auth/isAuthenticated",loggedUser:"auth/loggedUser",loggedToken:"auth/loggedToken"}),{image_list:function(){var t=this;return this.items.filter(function(e){return t.activeDistro.toLowerCase()===e.properties.os.toLowerCase()&&e})},distros_list:function(){return f()(new u.a(this.distros))}}),data:function(){return{error:"",snackbar:!1,snackbarColor:"green",snackbarText:"",snackbarTimeout:5e3,items:[],remotes:[],distros:[],publicServers:["images","ubuntu","ubuntu-daily"],showDelete:!1,activeRemote:"local",activeDistro:"ubuntu",tableLoading:!0,tableNoData:"You have not added any port forwards.",tableHeaders:[{text:"Description",value:"properties.description"},{text:"Version",value:"properties.version"},{text:"Release",value:"properties.release"},{text:"Size",value:"size"},{text:"Uploaded",value:"uploaded_at"},{text:"Actions",value:"actions",sortable:!1,align:"right"}],itemActions:[{title:"Start"},{title:"Stop"},{title:"Delete"}],dialog:!1,createDialog:!1,newItem:{name:"",image:"",image_fingerprint:"",profile:["default"],ephemeral:!1,remote:"local"},defaultItem:{name:"",image:"",image_fingerprint:"",profile:["default"],ephemeral:!1,remote:"local"},valid:!0,nameRule:[function(t){return!!t||"Name is required."},function(t){return t&&/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/.test(t)||"Only letters, digits or hyphens. No leading hyphen or digit. Dots are converted to hyphens."},function(t){return t&&isNaN(t.charAt(0))||"Only letters, digits or hyphens. No leading hyphen or digit. Dots are converted to hyphens."}],profilesRule:[function(t){return t.length>=1||"At least one profile is required."}]}},mounted:function(){this.initialize()},watch:{dialog:function(t){t||this.close()}},methods:{initialize:function(){var t=c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loggedUser||this.$router.replace("/servers"),g.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,t.next=5,g.a.get(this.loggedUser.sub+"/api/lxd/images/remotes");case 5:e=t.sent,this.remotes=e.data.data,this.loadRemoteImages(this.activeRemote),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),this.tableNoData="No data.",this.error="Could not fetch data from server.";case 14:this.tableLoading=!1;case 15:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}(),loadRemoteImages:function(){var t=c()(o.a.mark(function t(){var e,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loggedUser||this.$router.replace("/servers"),t.next=4,g.a.get(this.loggedUser.sub+"/api/lxd/images?remote="+i);case 4:e=t.sent,this.items=e.data.data,setTimeout(function(){for(var t in r.distros=[],r.items)r.distros.push(r.items[t].properties.os.toLowerCase())},0),this.show_delete=this.items.length>0&&!this.publicServers.includes(this.activeRemote),this.activeDistro="ubuntu",t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),this.tableNoData="No data.",this.error="Could not fetch data from server.";case 15:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),createContainer:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.$refs.form.validate()&&this.valid&&(this.loggedUser||this.$router.replace("/servers"),this.snackbar=!0,this.snackbarColor="green",this.snackbarText="Container queued for creation.",g.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,g.a.post(this.loggedUser.sub+"/api/lxd/containers",this.newItem).then(function(t){200===t.data.code?(e.snackbar=!0,e.snackbarText="Container created."):(e.snackbar=!0,e.snackbarColor="red",e.snackbarText=t.data.error)}).catch(function(t){e.error="Could not create container."}),this.createDialog=!1):(this.createDialog=!0,this.newItem={name:"",image:t.properties.description,image_fingerprint:t.fingerprint,profile:["default"],ephemeral:!1,remote:this.activeRemote})},safe_name:function(){this.newItem.name=this.newItem.name.replace(".","-")},editItem:function(t){this.editingIndex=this.items.indexOf(t),this.editingItem=a()({},t),this.dialog=!0},deleteItem:function(){var t=c()(o.a.mark(function t(e){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.items.indexOf(e),this.items.splice(r,1),t.prev=2,this.loggedUser||this.$router.replace("/servers"),g.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,t.next=7,g.a.delete(this.loggedUser.sub+"/api/lxd/images/"+e.fingerprint+"?remote="+this.activeRemote);case 7:t.sent,this.snackbar=!0,this.snackbarText="Image successfully deleted.",t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),this.error="Could not delete image from server.";case 15:case"end":return t.stop()}},t,this,[[2,12]])}));return function(e){return t.apply(this,arguments)}}(),save:function(){var t=c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=17;break}return this.editingIndex>-1?a()(this.items[this.editingIndex],this.editingItem):this.items.push(a()({},this.editingItem)),t.prev=2,this.loggedUser||this.$router.replace("/servers"),g.a.defaults.headers.common.Authorization="Bearer "+this.loggedToken,t.next=7,g.a.post(this.loggedUser.sub+"/api/routes/port-forwards",this.editingItem);case 7:t.sent,this.snackbar=!0,this.snackbarText="Port forward successfully saved.",t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),this.error="Could not save port forward to server.";case 15:this.initialize(),this.close();case 17:case"end":return t.stop()}},t,this,[[2,12]])}));return function(){return t.apply(this,arguments)}}(),close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editingItem=a()({},t.defaultItem),t.editingIndex=-1},300)},formatBytes:function(t,e){if(0==t)return"0 Bytes";var r=e||2,i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},ucfirst:function(t){return String(t).charAt(0).toUpperCase()+String(t).slice(1)}}}},arT6:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},"c/Tr":function(t,e,r){t.exports={default:r("5zde"),__esModule:!0}},fBQ2:function(t,e,r){"use strict";var i=r("evD5"),a=r("X8DO");t.exports=function(t,e,r){e in t?i.f(t,e,a(0,r)):t[e]=r}},ioQ5:function(t,e,r){r("HpRW")("Set")},lHA8:function(t,e,r){t.exports={default:r("pPW7"),__esModule:!0}},m9gC:function(t,e,r){var i=r("RY/4"),a=r("4WTo");t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},oNmr:function(t,e,r){r("9Bbf")("Set")},oeOm:function(t,e,r){var i=r("7Doy");t.exports=function(t,e){return new(i(t))(e)}},pPW7:function(t,e,r){r("M6a0"),r("zQR9"),r("+tPU"),r("ttyz"),r("BDhv"),r("oNmr"),r("ioQ5"),t.exports=r("FeBl").Set},qo66:function(t,e,r){"use strict";var i=r("7KvD"),a=r("kM2E"),n=r("06OY"),o=r("S82l"),s=r("hJx8"),c=r("xH/j"),l=r("NWt+"),u=r("2KxR"),d=r("EqjI"),f=r("e6n0"),v=r("evD5").f,h=r("ALrJ")(0),p=r("+E39");t.exports=function(t,e,r,m,g,b){var _=i[t],x=_,k=g?"set":"add",w=x&&x.prototype,y={};return p&&"function"==typeof x&&(b||w.forEach&&!o(function(){(new x).entries().next()}))?(x=e(function(e,r){u(e,x,t,"_c"),e._c=new _,void 0!=r&&l(r,g,e[k],e)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!b||"clear"!=t)&&s(x.prototype,t,function(r,i){if(u(this,x,t),!e&&b&&!d(r))return"get"==t&&void 0;var a=this._c[t](0===r?0:r,i);return e?this:a})}),b||v(x.prototype,"size",{get:function(){return this._c.size}})):(x=m.getConstructor(e,t,g,k),c(x.prototype,r),n.NEED=!0),f(x,t),y[t]=x,a(a.G+a.W+a.F,y),b||m.setStrong(x,t,g),x}},qyJz:function(t,e,r){"use strict";var i=r("+ZMJ"),a=r("kM2E"),n=r("sB3e"),o=r("msXi"),s=r("Mhyx"),c=r("QRG4"),l=r("fBQ2"),u=r("3fs2");a(a.S+a.F*!r("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,a,d,f=n(t),v="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,m=void 0!==p,g=0,b=u(f);if(m&&(p=i(p,h>2?arguments[2]:void 0,2)),void 0==b||v==Array&&s(b))for(r=new v(e=c(f.length));e>g;g++)l(r,g,m?p(f[g],g):f[g]);else for(d=b.call(f),r=new v;!(a=d.next()).done;g++)l(r,g,m?o(d,p,[a.value,g],!0):a.value);return r.length=g,r}})},tDWB:function(t,e,r){var i=r("arT6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);r("rjj0")("a6177390",i,!1,{sourceMap:!1})},td64:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-snackbar",{attrs:{top:"",timeout:t.snackbarTimeout,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n    "),r("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1),r("v-content",[r("v-container",{attrs:{fluid:"",tag:"section",id:"grid"}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"d-flex":"",xs12:"","order-xs5":""}},[r("v-layout",{attrs:{column:""}},[r("v-flex",{staticClass:"display mb-2",attrs:{tag:"h1"}},[t._v("\n              LXD - Images\n              ")]),r("v-flex",[r("v-alert",{attrs:{type:"error",value:t.error}},[t._v("\n                "+t._s(t.error)+"\n              ")]),r("v-tabs",{attrs:{right:""},on:{input:t.loadRemoteImages},model:{value:t.activeRemote,callback:function(e){t.activeRemote=e},expression:"activeRemote"}},[t._l(t.remotes,function(e){return r("v-tab",{key:e,attrs:{ripple:"",href:"#"+e}},[t._v(t._s(e))])}),t._l(t.remotes,function(t){return r("v-tab-item",{key:t,attrs:{id:""+t}})})],2),r("v-tabs",{attrs:{"show-arrows":""},model:{value:t.activeDistro,callback:function(e){t.activeDistro=e},expression:"activeDistro"}},[t._l(t.distros_list,function(e){return r("v-tab",{key:e,attrs:{ripple:"",href:"#"+e}},[t._v(t._s(e))])}),t._l(t.distros_list,function(t){return r("v-tab-item",{key:t,attrs:{id:""+t}})})],2),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.image_list,"hide-actions":"",loading:t.tableLoading},scopedSlots:t._u([{key:"items",fn:function(e){return[r("td",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){r.stopPropagation(),t.editItem(e.item)}}},[t._v(t._s(e.item.properties.description))])]),r("td",[t._v(t._s(e.item.properties.version))]),r("td",[t._v(t._s(t.ucfirst(e.item.properties.release)))]),r("td",[t._v(t._s(t.formatBytes(e.item.size)))]),r("td",[t._v(t._s(new Date(e.item.uploaded_at).toLocaleString()))]),r("td",[r("v-tooltip",{attrs:{left:""}},[t.show_delete?r("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(r){t.deleteItem(e.item)}},slot:"activator"},[r("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1):t._e(),r("span",[t._v("Delete Image")])],1),r("v-tooltip",{attrs:{left:""}},[r("v-btn",{staticClass:"mx-0",staticStyle:{float:"right"},attrs:{slot:"activator",icon:""},on:{click:function(r){t.createContainer(e.item,!1)}},slot:"activator"},[r("v-icon",{attrs:{color:"green"}},[t._v("play_circle_outline")])],1),r("span",[t._v("Launch Container")])],1)],1)]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),r("template",{slot:"no-data"},[t._v("\n                  "+t._s(t.tableLoading?"Fetching data, please wait...":"Remote has no images.")+"\n                ")])],2)],1)],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"900px",scrollable:""},model:{value:t.createDialog,callback:function(e){t.createDialog=e},expression:"createDialog"}},[r("v-card",{attrs:{tile:""}},[r("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.createDialog=!1}}},[r("v-icon",[t._v("close")])],1),r("v-toolbar-title",[t._v("Launch Container")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.createContainer(t.newItem,!0)}}},[t._v("Launch")])],1)],1),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"Name",rules:t.nameRule,hint:"Enter name for new container.",required:""},on:{input:function(e){t.safe_name()}},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}}),r("v-select",{attrs:{items:[t.newItem.image],label:"Image",required:"",disabled:""},model:{value:t.newItem.image,callback:function(e){t.$set(t.newItem,"image",e)},expression:"newItem.image"}}),r("v-select",{attrs:{items:["default"],rules:t.profilesRule,label:"Profiles",multiple:"",chips:"",required:""},model:{value:t.newItem.profile,callback:function(e){t.$set(t.newItem,"profile",e)},expression:"newItem.profile"}}),r("v-switch",{attrs:{label:(t.newItem.ephemeral,"Ephemeral"),color:"success"},model:{value:t.newItem.ephemeral,callback:function(e){t.$set(t.newItem,"ephemeral",e)},expression:"newItem.ephemeral"}})],1)],1),r("div",{staticStyle:{flex:"1 1 auto"}})],1)],1),r("v-dialog",{attrs:{"max-width":"900px",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",{attrs:{tile:""}},[r("v-toolbar",{attrs:{card:"",dark:"",color:"light-blue darken-3"}},[r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("close")])],1),r("v-toolbar-title",[t._v(".")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.save()}}},[t._v("Save")])],1)],1),r("v-card-text",{staticStyle:{padding:"0px"}},[r("v-card",{attrs:{flat:""}},[r("v-card-text")],1)],1),r("div",{staticStyle:{flex:"1 1 auto"}})],1)],1)],1)],1)};i._withStripped=!0;var a={render:i,staticRenderFns:[]};e.a=a},ttyz:function(t,e,r){"use strict";var i=r("9C8M"),a=r("LIJb");t.exports=r("qo66")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(a(this,"Set"),t=0===t?0:t,t)}},i)},"zL/w":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("RpbZ"),a=r("td64"),n=!1;var o=function(t){n||r("tDWB")},s=r("VU/8")(i.a,a.a,!1,o,null,null);s.options.__file="pages/lxd/images.vue",e.default=s.exports}});